<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FKTP DENKESYAH 02.04.03</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #1e3a8a;
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 8px;
        }
        
        .login-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #4b5563;
        }
        
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 16px;
        }
        
        button {
            background-color: #2563eb;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #1d4ed8;
        }
        
        .help-section {
            background-color: #dbeafe;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .error {
            background-color: #fee2e2;
            color: #dc2626;
            padding: 12px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        /* Dashboard Styles */
        .dashboard {
            display: none;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .logout-btn {
            background-color: #dc2626;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .logout-btn:hover {
            background-color: #b91c1c;
        }
        
        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .nav-btn {
            background-color: #4f46e5;
            padding: 20px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
            transition: background-color 0.3s;
        }
        
        .nav-btn:hover {
            background-color: #4338ca;
        }
        
        .clinic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .clinic-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .clinic-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #1e3a8a;
        }
        
        .clinic-detail {
            margin-bottom: 5px;
            color: #4b5563;
        }
        
        .detail-btn {
            background-color: #059669;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s;
        }
        
        .detail-btn:hover {
            background-color: #047857;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        
        th {
            background-color: #1e3a8a;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background-color: #f3f4f6;
        }
        
        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .stat-title {
            font-size: 16px;
            color: #4b5563;
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #1e3a8a;
        }
        
        /* Back Button */
        .back-btn {
            background-color: #6b7280;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .back-btn:hover {
            background-color: #4b5563;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Section -->
        <div id="login-section">
            <header>
                <h1>FKTP DENKESYAH 02.04.03</h1>
                <p>www.FKTPDenkesyahLampung.com</p>
            </header>
            
            <div class="login-form">
                <h2 style="text-align: center; margin-bottom: 20px;">Login</h2>
                
                <div class="help-section">
                    <h3>Petunjuk Login:</h3>
                    <p>• Username: minkes, Password: minkes123 (untuk akses minkes)</p>
                    <p>• Username: klinik, Password: klinik123 (untuk akses klinik)</p>
                    <p>• Username: user, Password: user123 (untuk akses user biasa)</p>
                </div>
                
                <div id="error-message" class="error" style="display: none;">
                    Username atau password salah
                </div>
                
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Masukkan username">
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Masukkan password">
                </div>
                
                <button id="login-btn">Login</button>
            </div>
        </div>
        
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="dashboard">
            <div class="dashboard-header">
                <h2>Dashboard FKTP DENKESYAH 02.04.03</h2>
                <div>
                    <span id="user-display">Halo, User</span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-btn" onclick="showClinics()">Daftar Klinik</button>
                <button class="nav-btn" onclick="showIncomeReport()">Laporan Pendapatan</button>
                <button class="nav-btn" onclick="showRealizationReport()">Realisasi Pendapatan</button>
                <button class="nav-btn" onclick="showBudgetRemaining()">Sisa Anggaran</button>
                <button class="nav-btn" onclick="showTotalRecap()">Rekap Total</button>
            </div>
            
            <!-- Clinics Section -->
            <div id="clinics-section" class="dashboard-content" style="display: block;">
                <h3>Daftar Unit FKTP</h3>
                <div class="clinic-grid" id="clinics-container">
                    <!-- Clinics will be loaded here -->
                </div>
            </div>
            
            <!-- Income Report Section -->
            <div id="income-report-section" class="dashboard-content" style="display: none;">
                <button class="back-btn" onclick="showClinics()">← Kembali</button>
                <h3>Laporan Pendapatan Kapitasi BPJS</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Bulan</th>
                            <th>Jumlah Pendapatan (Rp)</th>
                        </tr>
                    </thead>
                    <tbody id="income-report-body">
                        <!-- Income report data will be loaded here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Realization Report Section -->
            <div id="realization-report-section" class="dashboard-content" style="display: none;">
                <button class="back-btn" onclick="showClinics()">← Kembali</button>
                <h3>Realisasi Pendapatan</h3>
                
                <h4>Honor/Jasa (30%)</h4>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-title">Medis</div>
                        <div class="stat-value">Rp 30.000.000</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Paramedis</div>
                        <div class="stat-value">Rp 15.000.000</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Pengelola</div>
                        <div class="stat-value">Rp 10.000.000</div>
                    </div>
                </div>
                
                <h4>Operasional (50%)</h4>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-title">Belanja ATK</div>
                        <div class="stat-value">Rp 25.000.000</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Belanja Obat</div>
                        <div class="stat-value">Rp 55.000.000</div>
                    </div>
                </div>
                
                <h4>Belanja Modal (20%)</h4>
                <table>
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Nama Barang</th>
                            <th>Satuan</th>
                            <th>Harga</th>
                            <th>Jumlah</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Stetoskop</td>
                            <td>Unit</td>
                            <td>Rp 500.000</td>
                            <td>5</td>
                            <td>Rp 2.500.000</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Termometer Digital</td>
                            <td>Unit</td>
                            <td>Rp 300.000</td>
                            <td>10</td>
                            <td>Rp 3.000.000</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Tensimeter</td>
                            <td>Unit</td>
                            <td>Rp 800.000</td>
                            <td>3</td>
                            <td>Rp 2.400.000</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Budget Remaining Section -->
            <div id="budget-remaining-section" class="dashboard-content" style="display: none;">
                <button class="back-btn" onclick="showClinics()">← Kembali</button>
                <h3>Sisa Anggaran</h3>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-title">Total Anggaran</div>
                        <div class="stat-value">Rp 165.000.000</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Telah Digunakan</div>
                        <div class="stat-value">Rp 120.000.000</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Sisa Anggaran</div>
                        <div class="stat-value">Rp 45.000.000</div>
                    </div>
                </div>
                
                <h4>Sisa Anggaran Bulanan</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Bulan</th>
                            <th>Total Anggaran</th>
                            <th>Telah Digunakan</th>
                            <th>Sisa Anggaran</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Januari 2024</td>
                            <td>Rp 150.000.000</td>
                            <td>Rp 120.000.000</td>
                            <td>Rp 30.000.000</td>
                        </tr>
                        <tr>
                            <td>Februari 2024</td>
                            <td>Rp 155.000.000</td>
                            <td>Rp 130.000.000</td>
                            <td>Rp 25.000.000</td>
                        </tr>
                        <tr>
                            <td>Maret 2024</td>
                            <td>Rp 160.000.000</td>
                            <td>Rp 135.000.000</td>
                            <td>Rp 25.000.000</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Total Recap Section -->
            <div id="total-recap-section" class="dashboard-content" style="display: none;">
                <button class="back-btn" onclick="showClinics()">← Kembali</button>
                <h3>Rekap Total Semua Unit FKTP</h3>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-title">Total Pendapatan</div>
                        <div class="stat-value">Rp 1.500.000.000</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Total Realisasi</div>
                        <div class="stat-value">Rp 1.200.000.000</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Sisa Pendapatan</div>
                        <div class="stat-value">Rp 300.000.000</div>
                    </div>
                </div>
                
                <h4>Rekap per Unit FKTP</h4>
                <table>
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Nama Unit</th>
                            <th>Total Pendapatan</th>
                            <th>Total Realisasi</th>
                            <th>Sisa</th>
                        </tr>
                    </thead>
                    <tbody id="total-recap-body">
                        <!-- Total recap data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Data klinik
        const clinics = [
            { id: 1, name: 'FKTP Denkesyah 02.04.03 - Bandar Lampung', address: 'Jl. Teuku Umar No. 123, Bandar Lampung', phone: '0721-1234567', email: 'bandarlampung@fktpdenkesyah.com' },
            { id: 2, name: 'FKTP Denkesyah 02.04.03 - Metro', address: 'Jl. Jenderal Sudirman No. 45, Metro', phone: '0725-2345678', email: 'metro@fktpdenkesyah.com' },
            { id: 3, name: 'FKTP Denkesyah 02.04.03 - Pringsewu', address: 'Jl. Raya Pringsewu No. 78, Pringsewu', phone: '0729-3456789', email: 'pringsewu@fktpdenkesyah.com' },
            { id: 4, name: 'FKTP Denkesyah 02.04.03 - Pesawaran', address: 'Jl. Raya Pesawaran No. 23, Pesawaran', phone: '0721-4567890', email: 'pesawaran@fktpdenkesyah.com' },
            { id: 5, name: 'FKTP Denkesyah 02.04.03 - Tanggamus', address: 'Jl. Raya Tanggamus No. 56, Tanggamus', phone: '0722-5678901', email: 'tanggamus@fktpdenkesyah.com' },
            { id: 6, name: 'FKTP Denkesyah 02.04.03 - Lampung Selatan', address: 'Jl. Raya Kalianda No. 89, Lampung Selatan', phone: '0727-6789012', email: 'lampungselatan@fktpdenkesyah.com' },
            { id: 7, name: 'FKTP Denkesyah 02.04.03 - Lampung Tengah', address: 'Jl. Raya Terbanggi Besar No. 34, Lampung Tengah', phone: '0721-7890123', email: 'lampungtengah@fktpdenkesyah.com' },
            { id: 8, name: 'FKTP Denkesyah 02.04.03 - Lampung Utara', address: 'Jl. Raya Kotabumi No. 67, Lampung Utara', phone: '0724-8901234', email: 'lampungutara@fktpdenkesyah.com' },
            { id: 9, name: 'FKTP Denkesyah 02.04.03 - Way Kanan', address: 'Jl. Raya Blambangan Umpu No. 12, Way Kanan', phone: '0728-9012345', email: 'waykanan@fktpdenkesyah.com' },
            { id: 10, name: 'FKTP Denkesyah 02.04.03 - Lampung Timur', address: 'Jl. Raya Sukadana No. 45, Lampung Timur', phone: '0725-0123456', email: 'lampungtimur@fktpdenkesyah.com' }
        ];
        
        // Data laporan pendapatan
        const incomeReports = [
            { month: 'Januari 2024', amount: 150000000 },
            { month: 'Februari 2024', amount: 155000000 },
            { month: 'Maret 2024', amount: 160000000 },
            { month: 'April 2024', amount: 158000000 },
            { month: 'Mei 2024', amount: 162000000 },
            { month: 'Juni 2024', amount: 165000000 }
        ];
        
        // Login function - DIPERBAIKI: Menggunakan minkes bukan admin
        document.getElementById('login-btn').addEventListener('click', function() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Validasi login - DIPERBAIKI: Menggunakan minkes
            if ((username === 'minkes' && password === 'minkes123') || 
                (username === 'klinik' && password === 'klinik123') || 
                (username === 'user' && password === 'user123')) {
                
                // Simpan user ke localStorage - DIPERBAIKI: Menggunakan minkes
                localStorage.setItem('fktpUser', JSON.stringify({
                    username: username,
                    type: username === 'minkes' ? 'minkes' : 'klinik',
                    isLoggedIn: true
                }));
                
                // Tampilkan dashboard
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('dashboard-section').style.display = 'block';
                document.getElementById('user-display').textContent = `Halo, ${username}`;
                
                // Load data klinik
                loadClinics();
                loadIncomeReport();
                loadTotalRecap();
            } else {
                document.getElementById('error-message').style.display = 'block';
            }
        });
        
        // Logout function
        function logout() {
            localStorage.removeItem('fktpUser');
            document.getElementById('login-section').style.display = 'block';
            document.getElementById('dashboard-section').style.display = 'none';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('error-message').style.display = 'none';
        }
        
        // Load clinics
        function loadClinics() {
            const container = document.getElementById('clinics-container');
            container.innerHTML = '';
            
            clinics.forEach(clinic => {
                const clinicCard = document.createElement('div');
                clinicCard.className = 'clinic-card';
                clinicCard.innerHTML = `
                    <div class="clinic-name">${clinic.name}</div>
                    <div class="clinic-detail">Alamat: ${clinic.address}</div>
                    <div class="clinic-detail">Telepon: ${clinic.phone}</div>
                    <div class="clinic-detail">Email: ${clinic.email}</div>
                    <button class="detail-btn" onclick="showClinicDetail(${clinic.id})">Lihat Detail</button>
                `;
                container.appendChild(clinicCard);
            });
        }
        
        // Show clinics section
        function showClinics() {
            hideAllSections();
            document.getElementById('clinics-section').style.display = 'block';
        }
        
        // Show income report section
        function showIncomeReport() {
            hideAllSections();
            document.getElementById('income-report-section').style.display = 'block';
        }
        
        // Show realization report section
        function showRealizationReport() {
            hideAllSections();
            document.getElementById('realization-report-section').style.display = 'block';
        }
        
        // Show budget remaining section
        function showBudgetRemaining() {
            hideAllSections();
            document.getElementById('budget-remaining-section').style.display = 'block';
        }
        
        // Show total recap section
        function showTotalRecap() {
            hideAllSections();
            document.getElementById('total-recap-section').style.display = 'block';
        }
        
        // Hide all sections
        function hideAllSections() {
            const sections = document.querySelectorAll('.dashboard-content');
            sections.forEach(section => {
                section.style.display = 'none';
            });
        }
        
        // Show clinic detail
        function showClinicDetail(clinicId) {
            const clinic = clinics.find(c => c.id === clinicId);
            if (clinic) {
                alert(`Detail Klinik: ${clinic.name}\n\nAlamat: ${clinic.address}\nTelepon: ${clinic.phone}\nEmail: ${clinic.email}`);
            }
        }
        
        // Load income report
        function loadIncomeReport() {
            const tbody = document.getElementById('income-report-body');
            tbody.innerHTML = '';
            
            let total = 0;
            incomeReports.forEach(report => {
                total += report.amount;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${report.month}</td>
                    <td>Rp ${report.amount.toLocaleString('id-ID')}</td>
                `;
                tbody.appendChild(row);
            });
            
            // Add total row
            const totalRow = document.createElement('tr');
            totalRow.style.fontWeight = 'bold';
            totalRow.style.backgroundColor = '#f3f4f6';
            totalRow.innerHTML = `
                <td><strong>TOTAL</strong></td>
                <td><strong>Rp ${total.toLocaleString('id-ID')}</strong></td>
            `;
            tbody.appendChild(totalRow);
        }
        
        // Load total recap
        function loadTotalRecap() {
            const tbody = document.getElementById('total-recap-body');
            tbody.innerHTML = '';
            
            const totalIncome = 1500000000;
            const totalRealization = 1200000000;
            const remaining = 300000000;
            
            clinics.forEach((clinic, index) => {
                const avgIncome = totalIncome / clinics.length;
                const avgRealization = totalRealization / clinics.length;
                const avgRemaining = remaining / clinics.length;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${clinic.name}</td>
                    <td>Rp ${Math.round(avgIncome).toLocaleString('id-ID')}</td>
                    <td>Rp ${Math.round(avgRealization).toLocaleString('id-ID')}</td>
                    <td>Rp ${Math.round(avgRemaining).toLocaleString('id-ID')}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // Check if user is already logged in
        window.addEventListener('load', function() {
            const savedUser = localStorage.getItem('fktpUser');
            if (savedUser) {
                const userData = JSON.parse(savedUser);
                if (userData.isLoggedIn) {
                    document.getElementById('login-section').style.display = 'none';
                    document.getElementById('dashboard-section').style.display = 'block';
                    document.getElementById('user-display').textContent = `Halo, ${userData.username}`;
                    
                    // Load data
                    loadClinics();
                    loadIncomeReport();
                    loadTotalRecap();
                }
            }
        });
    </script>
</body>
</html>
